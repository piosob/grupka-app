---
alwaysApply: true
---

# AI Rules for {Grupka}

**Grupka (MVP)** is a server-side rendering (SSR) web application designed with a Mobile First philosophy for parent self-organization in preschool and school groups. Its primary goal is to streamline communication regarding birthdays and gifts while respecting user privacy and minimizing notifications.

The project emphasizes excellent performance on mobile devices, minimal personal data (no names), and an asynchronous communication model. The application is based on Astro 5, React 19, Tailwind 4, and Supabase. Key features include temporary invitation codes, an administrator role with email contact options, hidden guest threads, and an AI assistant that supports gift list creation in edit mode.

## Tech Stack

- Astro 5
- TypeScript 5
- React 19
- Tailwind 4

## Project Structure

When introducing changes to the project, always follow the directory structure below:

- `./src` - source code
- `./src/layouts` - Astro layouts
- `./src/pages` - Astro pages
- `./src/pages/api` - API endpoints
- `./src/middleware/index.ts` - Astro middleware
- `./src/db` - Supabase clients and types
- `./src/types.ts` - Shared types for backend and frontend (Entities, DTOs)
- `./src/components` - Client-side components written in Astro (static) and React (dynamic)
- `./src/components/ui` - Client-side components from Shadcn/ui
- `./src/lib` - Services and helpers
- `./src/assets` - static internal assets
- `./public` - public assets

When modifying the directory structure, always update this section.

## Coding practices

### Guidelines for clean code

- Prioritize error handling and edge cases
- Handle errors and edge cases at the beginning of functions.
- Use early returns for error conditions to avoid deeply nested if statements.
- Place the happy path last in the function for improved readability.
- Avoid unnecessary else statements; use if-return pattern instead.
- Use guard clauses to handle preconditions and invalid states early.
- Implement proper error logging and user-friendly error messages.
- Consider using custom error types or error factories for consistent error handling.
