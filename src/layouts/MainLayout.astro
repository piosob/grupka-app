---
import '../styles/global.css';
import { ClientRouter } from 'astro:transitions';
import { Toaster } from '../components/ui/sonner';

interface Props {
    title: string;
    groupId?: string; // for group context pages
}

const { title, groupId } = Astro.props;
---

<!doctype html>
<html lang="pl" class="dark">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="generator" content={Astro.generator} />
        <title>{title} | Grupka</title>
        <ClientRouter />
    </head>
    <body>
        <div class="flex flex-col min-h-screen">
            <!-- Top Bar -->
            <header class="sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
                <div class="container mx-auto flex h-14 items-center">
                    <!-- Logo/Brand -->
                    <a href="/" class="mr-4 flex items-center">
                        <span class="font-bold">Grupka</span>
                    </a>
                    {groupId && (
                        <!-- GroupSwitcher (center/left) - dropdown z listÄ… grup -->
                        <div class="ml-auto">
                            <!-- Placeholder for GroupSwitcher -->
                            <span class="text-sm">Group Switcher</span>
                        </div>
                    )}
                    <!-- Profile Menu (right) - avatar + dropdown -->
                    <nav class="flex items-center space-x-2 ml-auto">
                        <!-- Placeholder for Profile Dropdown -->
                        <span class="text-sm">Profile</span>
                    </nav>
                </div>
            </header>

            <!-- Main Content -->
            <main class="flex-1 container mx-auto py-6">
                <slot />
            </main>

            <!-- Bottom Navigation (Mobile) / Left Sidebar (Desktop) -->
            {groupId && (
                <>
                    <!-- Mobile Bottom Nav -->
                    <footer class="fixed inset-x-0 bottom-0 z-50 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 md:hidden">
                        <nav class="flex h-14 items-center justify-around">
                            <!-- Placeholder for Bottom Nav Items -->
                            <a href={`/groups/${groupId}/events`} class="flex flex-col items-center justify-center text-xs">
                                <span class="text-lg">ðŸŽ‚</span>
                                <span>Wydarzenia</span>
                            </a>
                            <a href={`/groups/${groupId}/children`} class="flex flex-col items-center justify-center text-xs">
                                <span class="text-lg">ðŸ‘¶</span>
                                <span>Dzieci</span>
                            </a>
                            <a href={`/groups/${groupId}/members`} class="flex flex-col items-center justify-center text-xs">
                                <span class="text-lg">ðŸ‘¥</span>
                                <span>CzÅ‚onkowie</span>
                            </a>
                            <button class="flex flex-col items-center justify-center text-xs">
                                <span class="text-lg">â‹¯</span>
                                <span>WiÄ™cej</span>
                            </button>
                        </nav>
                    </footer>

                    <!-- Desktop Left Sidebar -->
                    <aside class="fixed left-0 top-14 hidden h-[calc(100vh-3.5rem)] w-64 flex-col border-r bg-background/95 p-4 md:flex">
                        <nav class="flex flex-col space-y-2">
                            <!-- Placeholder for Sidebar Items -->
                            <a href={`/groups/${groupId}/events`} class="flex items-center px-3 py-2 text-sm font-medium rounded-md hover:bg-muted">Wydarzenia</a>
                            <a href={`/groups/${groupId}/children`} class="flex items-center px-3 py-2 text-sm font-medium rounded-md hover:bg-muted">Dzieci</a>
                            <a href={`/groups/${groupId}/members`} class="flex items-center px-3 py-2 text-sm font-medium rounded-md hover:bg-muted">CzÅ‚onkowie</a>
                            <div class="border-t my-2"></div>
                            <a href={`/groups/${groupId}/invite`} class="flex items-center px-3 py-2 text-sm font-medium rounded-md hover:bg-muted">Generuj kod</a>
                            <a href={`/groups/${groupId}/settings`} class="flex items-center px-3 py-2 text-sm font-medium rounded-md hover:bg-muted">Ustawienia</a>
                            <div class="border-t my-2"></div>
                            <a href="/profile" class="flex items-center px-3 py-2 text-sm font-medium rounded-md hover:bg-muted">Profil</a>
                            <button class="flex items-center px-3 py-2 text-sm font-medium rounded-md hover:bg-muted">Wyloguj siÄ™</button>
                        </nav>
                    </aside>
                </>
            )}
        </div>
        <Toaster client:only />
    </body>
</html>

<style is:global>
    html,
    body {
        margin: 0;
        width: 100%;
        height: 100%;
    }
</style>
