---
import MainLayout from '../../../layouts/MainLayout.astro';
import { MembersContainer } from '../../../components/react/members/MembersContainer';

const { groupId } = Astro.params;

if (!groupId) {
    return Astro.redirect('/dashboard');
}

// User must be authenticated to access this page (protected by middleware)
const user = Astro.locals.user;

if (!user) {
    return Astro.redirect('/login');
}

const currentUserId = user.id;
---

<MainLayout title="CzÅ‚onkowie Grupy" groupId={groupId}>
    <div class="container mx-auto px-4 py-8">
        <MembersContainer groupId={groupId} currentUserId={currentUserId} client:load />
    </div>
</MainLayout>
